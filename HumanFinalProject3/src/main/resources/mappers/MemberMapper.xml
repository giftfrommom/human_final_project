<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="memberDAO">

	<select id="info" parameterType="customer" resultType="customer">
		select * from CUSTOMER where CUSTOMER_ID = #{CUSTOMER_ID}
	</select>
	
	<select id="memberLogin" parameterType="customer" resultType="customer">
	
	
	select * from CUSTOMER where CUSTOMER_LOGINID = #{CUSTOMER_LOGINID}
	
	<if test = "CUSTOMER_PASSWORD != null">
		AND CUSTOMER_PASSWORD = #{CUSTOMER_PASSWORD}
	</if>
	
	
	</select> 
	
	   <insert id="memberInsert" parameterType="customer">

   INSERT INTO CUSTOMER 
   		(CUSTOMER_ID, CUSTOMER_NAME, CUSTOMER_LOGINID, CUSTOMER_PASSWORD, CUSTOMER_EMAIL, CUSTOMER_PREFERMENU, CUSTOMER_PREFERSTORE, CUSTOMER_NICKNAME, CUSTOMER_ADDRESS1, CUSTOMER_ADDRESS2, CUSTOMER_ADDRESS3, CUSTOMER_ADDRESS4, CUSTOMER_MONEY)      
       VALUES ( CUSTOMER_TEST_SEQ.nextval,#{CUSTOMER_NAME},#{CUSTOMER_LOGINID},#{CUSTOMER_PASSWORD},#{CUSTOMER_EMAIL},#{CUSTOMER_PREFERMENU},#{CUSTOMER_PREFERSTORE},#{CUSTOMER_NICKNAME},#{CUSTOMER_ADDRESS1},#{CUSTOMER_ADDRESS2},#{CUSTOMER_ADDRESS3},#{CUSTOMER_ADDRESS4},10000)
   
   </insert>
   
	<insert id="couponInsert1">
		INSERT INTO COUPON
		(COUPON_ID,CUSTOMER_ID, COUPON_DISCOUNT, COUPON_MINIMUM)
		VALUES
		(COUPON_TEST_SEQ.NEXTVAL, 
		(SELECT LAST_NUMBER-1 FROM USER_SEQUENCES WHERE SEQUENCE_NAME = 'CUSTOMER_TEST_SEQ'),
		1000,20000)
	</insert>
	<insert id="couponInsert2">
		INSERT INTO COUPON
		(COUPON_ID,CUSTOMER_ID, COUPON_DISCOUNT, COUPON_MINIMUM)
		VALUES
		(COUPON_TEST_SEQ.NEXTVAL, 
		(SELECT LAST_NUMBER-1 FROM USER_SEQUENCES WHERE SEQUENCE_NAME = 'CUSTOMER_TEST_SEQ'),
		2000,20000)
	</insert>
	<insert id="couponInsert3">  
		INSERT INTO COUPON
		(COUPON_ID,CUSTOMER_ID, COUPON_DISCOUNT, COUPON_MINIMUM)
		VALUES
		(COUPON_TEST_SEQ.NEXTVAL, 
		(SELECT LAST_NUMBER-1 FROM USER_SEQUENCES WHERE SEQUENCE_NAME = 'CUSTOMER_TEST_SEQ'),
		3000,20000)	
	</insert>
	<insert id="couponInsert4">	   
		INSERT INTO COUPON
		(COUPON_ID,CUSTOMER_ID, COUPON_DISCOUNT, COUPON_MINIMUM)
		VALUES
		(COUPON_TEST_SEQ.NEXTVAL, 
		(SELECT LAST_NUMBER-1 FROM USER_SEQUENCES WHERE SEQUENCE_NAME = 'CUSTOMER_TEST_SEQ'),
		4000,30000)	     
	</insert>
	
	
	<select id="memberEmail" parameterType="customer" resultType="customer">
	
	
	select * from CUSTOMER where CUSTOMER_EMAIL = #{CUSTOMER_EMAIL}
	
	<if test = "CUSTOMER_PASSWORD != null">
		AND CUSTOMER_PASSWORD = #{CUSTOMER_PASSWORD}
	</if>
	
	</select>
	
</mapper>


